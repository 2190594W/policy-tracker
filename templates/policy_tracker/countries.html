{% extends 'policy_tracker/base.html' %}
{% load staticfiles %}
{% load index from policy_tracker_app_template_tags %}

{% block title_block %}
    - Countries
{% endblock %}

{% block body_block %}
<div class="container shift-right">
  <div class="row">
    <div class="col-md-6">
      <h1 class=page-header>Countries</h1>
    </div>
    <div class="col-md-6">
      <a href="add_country" class="btn btn-outline-primary btn-lg" role="button">Add Country</a>
    </div>
    {% if countries %}
      {% for country in countries %}
        <div class="col-md-4">
            <label class="flip-box">
              <input type="checkbox" style="display: none"/>
              <div class="card country-box">
                <div class="front">
                  <img src="{% with country.map_image.url as img_url %}{{ img_url|slice:"-34:"}}
                            {% endwith %}" alt="{{ country.name }} map flag">
                  <div class="caption">
                    <p>{{ country.name }}</p>
                  </div>
                </div>
                <div class="back align-self-center">
                  <i class="fa fa-briefcase status-icon bs-purple"></i><hr/>
                  <h3>Total Policies: <span class="bs-light-blue">{{ policies|index:forloop.counter0|length }}</span></h3><br/>
                  <a href="{{ country.slug }}" class="btn btn-secondary btn-lg" role="button">See more...</a>
                </div>
              </div>
            </label>
        </div>
      {% endfor %}
    {% else %}
      <strong>No countries present</strong>
    {% endif %}
 </div>
</div>
{% endblock %}
